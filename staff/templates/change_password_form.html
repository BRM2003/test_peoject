{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Change Password</title>
    <link rel="stylesheet" href="{% static 'Authenticate/Login/styles/login_style.css' %}">
    <style>
        body {
            background-image: url("{% static 'Authenticate/Login/img/login background.jpg' %}");
        }
    </style>
</head>

<body>

    <div class="content">
        <h1 class="heading-section">Task Manager</h1>
        <form action="" method="POST" name="main_form" onsubmit="return check_password()">
            {% csrf_token %}
            <input type="hidden" name="page_return" value="{{page_return}}">
            <label for="old_password">Old password</label>
            <input type="password" name="old_password" id="old_password" required>
            <label for="new_password">New Password</label>
            <input type="password" name="new_password" id="new_password" required>
            <label for="repeat_password">Repeat Password</label>
            <input type="password" name="repeat_password" id="repeat_password" required>
            <input type="submit" value="Change password" id="submit">
            <p class="error_message" style="color: #ff1d1d;">{{error}}</p>
        </form>
    </div>

</body>
    <script>
        let new_password = document.getElementById('new_password'),
            repeat_password = document.getElementById('repeat_password'),
            error_message = document.querySelector('.error_message'),
            main_form = document.querySelector('form');
        
        function check_password() {
            if (new_password.value != repeat_password.value) {
                error_message.innerHTML = "Password doesn't match"
                new_password.style.color = '#ff1d1d'
                repeat_password.style.color = '#ff1d1d'
                return false;
            } else {
                error_message.innerHTML = ""
                new_password.style.color = 'white'
                repeat_password.style.color = 'white'
                return true;
            }
        }
    </script>
</html>